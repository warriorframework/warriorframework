language: python

matrix:
  include:
    - os: linux
      env: INSTALL=yes TESTFILE=./wftests/warrior_tests/projects/selenium_project.xml SELENIUM=yes
      python: 2.7
      addons:
        firefox: "46.0"
    - os: linux
      env: INSTALL=yes TESTFILE=./wftests/warrior_tests/projects/selenium_project.xml SELENIUM=yes SELENIUM3=yes
      python: 2.7
      addons:
        firefox: "46.0"

install:
    - if [ ${INSTALL} = "yes" ]; then
        pip install requests==2.9.1 ;
        pip install selenium==2.53.0 ;
      fi
    - if [ ${SELENIUM} = "yes" ]; then
        pip install pyvirtualdisplay==0.2.1 ;
        sudo apt-get install xvfb ;
        wget https://chromedriver.storage.googleapis.com/2.34/chromedriver_linux64.zip;
        unzip chromedriver_linux64.zip;
        chmod +x chromedriver;
        sudo mv chromedriver /usr/local/bin/;
      fi
    - if [ ${SELENIUM3} = "yes" ]; then
        pip install selenium==3.8 ;
      fi

script:
    - if [ ${PYLINT} = "yes" ]; then
        $TESTFILE ;
      else
        python ./warrior/Warrior -headless $TESTFILE ;
      fi
